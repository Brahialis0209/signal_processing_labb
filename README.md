# Описание работы
Это приложение позволяет решать следующую задачу.<br>
На изображениях имеется стол в сдвумя тумбочками. Они всегда в одном положении и в оттенках желтого цвета.<br> Также есть стул с желтым сиденьем. Он может иметь разные положения.<br>Выяснить, можно ли задвинуть стул так, чтобы он пролез через тумбочки.
## Требования
- Python 3.6 - ...
- пакеты, указанные в `requirements.txt`
## Установка, запуск, удаление
1. Cоздать копию репозитория: `https://github.com/Brahialis0209/signal_processing_lab`
2. Перейти в папку проекта - cd [путь к директории в которой лежит проект]/signal_processing_lab
3. Установить недостающие пакеты - pip install -r requirements.txt
4. Перейти в диреторию src - cd src
4. Запустить приложение - python main.py
## Алгоритм
- Учитываем то что объекты(стул, стол и тумбочки) окрашены в желтый цвет.Представим изображение в модели HSV,то есть будем отделять информацию<br> о цвете и яркости: оттенок, насыщенность и интенсивность позволяют задать нижнюю и верхнюю границы оттенков некоторого цвета, в данном случае –– желтого.
- Далее проведем сегментирование: пометим пиксели, находящиеся в желтом диапазоне и получим цветовую маску. 
- Теперь применим операцию логического умножения к исходному изображению, присвоим значениям пикселей фона значение черного цвета и получим сегментированное изображение.
- Могут быть шумы фона, тогда применяя морфологические операции(например размыкание) — можно их устранить.
- По полученному результату, будем выделять границы и найдем контуры применяя метод из cv2.
- Сортируем полученный контуры по площади. Очевидно самым последним в списке будет стол. Стул и две тумбочки нужно определить.<br> Определить стул можно посчитав расстояние до первого контура - стола. Для этого строим прямоуголники вокруг предполагаемых контуров(последние 3 кроме стола, т.к тумбочки стул имеют примерно одинаковую площадь) и вокруг самого стола и находим максимальное расстояние от стола до предполагаемого стула(расстояние до тумбочек будет очевидно меньше).<br>
При построении применяются методы из cv2.
- После нахождения стула, берем тумбочки как оставшиеся 2 контура из последних 4 в отсортированном списке.(мы уже опознали стол и стул)
- Используя метод из cv2 ищем граничные краевые точки для тумбочек, тогда находим расстояние между ними.
- Также стриом перевернутый прямоугольник вокруг сиденья стула и находим его размеры.
- Далее учитываем масштаб(расстояние от стула до стола) и сранвиваем размеры сиденья с найденным ранее расстоянием между тумбочками.
## Работа с приложением
- Сперва нужно определиться с данными - их нужно поместить в `date/in`
- Обработанные изображения появятся в `date/results`. На выходных изображениях помечены тумбочки и стул.<br> Результаты работы `Failure` или `Success` также помечены.
### Требования к условиям задачи
- Убедитесь что ваши фотографии соотвествуют требуемым из описания.
### Примеры
#### Рассмотрим работу приложения на следующих примерах.
![spb](date/results/good_example.png)<br>
Тут работа алгоиритма выглядит очень неплохо. Красным помечены контуры вокруг тумбочек и стула. Как видно, все желтые объекты хорошо отделены друг от друга. Алгоритм выдал результат о том что стул можно задвинуть. (сообщение -`Success`)<br>
![spb](date/results/IMG_20210224_000858.png)<br>
![spb](date/results/IMG_20210224_001034.png)<br>
Примеры когда алгоритм опознал то что стул задвинуть нельзя. Как видно контуры выделены правильно.<br>

![spb](date/results/IMG_20210224_001106.png)<br>
Пример с неправильной работой алгоритма, спинку стула перекрывает сиденье, распознать стул не удается.
![spb](date/results/IMG_20210224_000946.png)<br>
Алгоритм выдал правильный ответ, но тумбочка перекрытая спинкой стула не выделена.<br>

### Небольшие выводы по резльтатам
Для устранения ошибок распознавания планируется использовать доп.методы обработки изображений (сравнение с шаблоном, ещё одна попытка с особоыми точками, т.к в первый раз не получилось)<br>
Ссылка на полный датасет: https://drive.google.com/drive/folders/17Ez9ddYaYzc_n6LXvYBV-GPWgpdIS-rL?usp=sharing